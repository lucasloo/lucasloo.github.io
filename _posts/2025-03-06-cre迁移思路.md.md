## CRE迁移BDP

CRE批量负责每日挑选账单日为该批量日期的用户进行跑批，决策出用户的管控动作的功能。

### 迁移原因

1. tdsql容量告急，迁移BDP后应用侧的tdsql可以每日清理数据

2. 征信数据在cdps和cre各自维护一份全量，冗余浪费，迁移到BDP后可以使用cdps的DW库，只需维护一份全量

3. 迁移BDP后可以通过集群的分配优化性能

### 思路关键点

- 功能

- 数据

- 性能

- 兼容性

### 设计阶段

- 功能
  
  - 代码方面，整理出当前CRE的所有需求清单
  
  - 业务方面，与业务部门紧密合作，对齐清单内容，确保需求清单的准确性和全面性

- 数据
  
  - 整理好源系统的数据清单，对源系统设计有不足的地方进行优化，确保旧系统的每一个字段都能对应到新系统的字段上
  
  - 梳理好迁移验证方案，确保数据的准确性

- 性能
  
  - 统计好当前批量的运行时间，做好监控报表
  
  - 提前准备好批量平台指标的监控工具，方便测试阶段的监控

- 兼容性
  
  - 系统方面，分析上下游系统的交互文件、接口，整理好关联方清单
  
  - 业务方面，按清单对齐接口、文件的时效性

### 验证阶段

- 功能
  
  - 系统方面，进行双跑，通过比对批量的输入输出是否完全一致来验证功能一致
  
  - 业务方面，进行演员验证，通过业务层面验证演员的表现是否符合业务需求

- 数据
  
  - 验证迁移数据，通过对照脚本确认迁移前后数据一致
  
  - 通过流量回放，确认功能验证后两边产出的数据一致

- 性能
  
  - 双跑阶段，比对两边耗时，调整大数据平台参数进行多次比对，确认最优参数配置
  
  - 通过行内的性能监控工具，监控旧应用以及新应用的资源使用情况，确认是否有性能瓶颈风险

- 兼容性
  
  - 确认新旧产出文件是否完全一致
  
  - 确认产出报文是否完全一致
  
  - 确认文件和报文的时效是否能满足

## 迁移阶段

- 双跑

- 灰度迁移

- 日终验证

- 迁移演练

- 回滚预案

- 补数预案
  
  
  
  
